{"ast":null,"code":"import { createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, toDisplayString as _toDisplayString, normalizeClass as _normalizeClass, resolveDirective as _resolveDirective, withDirectives as _withDirectives, createTextVNode as _createTextVNode } from \"vue\";\nconst _hoisted_1 = {\n  class: \"discover-container\"\n};\nconst _hoisted_2 = {\n  class: \"discover\"\n};\nconst _hoisted_3 = {\n  key: 0,\n  class: \"content-wrapper\"\n};\nconst _hoisted_4 = {\n  key: 0,\n  class: \"feature-grid\"\n};\nconst _hoisted_5 = {\n  key: 1,\n  class: \"orders-section\"\n};\nconst _hoisted_6 = {\n  class: \"order-list\"\n};\nconst _hoisted_7 = {\n  class: \"order-header\"\n};\nconst _hoisted_8 = {\n  class: \"order-number\"\n};\nconst _hoisted_9 = {\n  class: \"order-body\"\n};\nconst _hoisted_10 = {\n  class: \"order-info\"\n};\nconst _hoisted_11 = {\n  class: \"price\"\n};\nconst _hoisted_12 = {\n  class: \"date\"\n};\nconst _hoisted_13 = [\"onClick\"];\nconst _hoisted_14 = {\n  key: 2,\n  class: \"admin-section\"\n};\nconst _hoisted_15 = {\n  class: \"feature-grid\"\n};\nconst _hoisted_16 = {\n  class: \"admin-panel\"\n};\nconst _hoisted_17 = {\n  class: \"panel-header\"\n};\nconst _hoisted_18 = {\n  key: 0,\n  class: \"role-info\"\n};\nconst _hoisted_19 = {\n  class: \"panel-content\"\n};\nconst _hoisted_20 = {\n  key: 0,\n  class: \"error-message\"\n};\nconst _hoisted_21 = {\n  class: \"user-section\"\n};\nconst _hoisted_22 = {\n  class: \"user-list\"\n};\nconst _hoisted_23 = {\n  class: \"user-info\"\n};\nconst _hoisted_24 = {\n  class: \"username\"\n};\nconst _hoisted_25 = {\n  key: 0,\n  class: \"user-actions\"\n};\nconst _hoisted_26 = [\"onClick\"];\nconst _hoisted_27 = [\"onClick\"];\nconst _hoisted_28 = {\n  class: \"user-section\"\n};\nconst _hoisted_29 = {\n  class: \"user-list\"\n};\nconst _hoisted_30 = {\n  class: \"user-info\"\n};\nconst _hoisted_31 = {\n  class: \"username\"\n};\nconst _hoisted_32 = {\n  key: 0,\n  class: \"user-actions\"\n};\nconst _hoisted_33 = [\"onClick\"];\nconst _hoisted_34 = [\"onClick\"];\nconst _hoisted_35 = {\n  class: \"dialog-footer\"\n};\nconst _hoisted_36 = {\n  key: 1,\n  class: \"login-prompt\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_router_link = _resolveComponent(\"router-link\");\n  const _component_el_alert = _resolveComponent(\"el-alert\");\n  const _component_el_button = _resolveComponent(\"el-button\");\n  const _component_el_dialog = _resolveComponent(\"el-dialog\");\n  const _directive_loading = _resolveDirective(\"loading\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_cache[22] || (_cache[22] = _createElementVNode(\"header\", {\n    class: \"page-header\"\n  }, [_createElementVNode(\"h1\", null, \"发现\")], -1)), $options.isLoggedIn ? (_openBlock(), _createElementBlock(\"div\", _hoisted_3, [!$options.isAdmin && !$options.isSuperAdmin ? (_openBlock(), _createElementBlock(\"div\", _hoisted_4, [_createVNode(_component_router_link, {\n    to: \"/CanteenOrder\",\n    class: \"feature-card\"\n  }, {\n    default: _withCtx(() => _cache[3] || (_cache[3] = [_createElementVNode(\"div\", {\n      class: \"card-icon\"\n    }, \"🍽️\", -1), _createElementVNode(\"span\", {\n      class: \"card-title\"\n    }, \"社区食堂\", -1)])),\n    _: 1\n  }), _createElementVNode(\"div\", {\n    class: \"feature-card\",\n    onClick: _cache[0] || (_cache[0] = (...args) => $options.fetchUserOrders && $options.fetchUserOrders(...args))\n  }, _cache[4] || (_cache[4] = [_createElementVNode(\"div\", {\n    class: \"card-icon\"\n  }, \"📋\", -1), _createElementVNode(\"span\", {\n    class: \"card-title\"\n  }, \"我的订单\", -1)])), _createVNode(_component_router_link, {\n    to: \"/feedback\",\n    class: \"feature-card\"\n  }, {\n    default: _withCtx(() => _cache[5] || (_cache[5] = [_createElementVNode(\"div\", {\n      class: \"card-icon\"\n    }, \"💭\", -1), _createElementVNode(\"span\", {\n      class: \"card-title\"\n    }, \"意见反馈\", -1)])),\n    _: 1\n  }), _createVNode(_component_router_link, {\n    to: \"/votelist\",\n    class: \"feature-card\"\n  }, {\n    default: _withCtx(() => _cache[6] || (_cache[6] = [_createElementVNode(\"div\", {\n      class: \"card-icon\"\n    }, \"📊\", -1), _createElementVNode(\"span\", {\n      class: \"card-title\"\n    }, \"管理投票\", -1)])),\n    _: 1\n  })])) : _createCommentVNode(\"\", true), $data.orders.length > 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_5, [_cache[7] || (_cache[7] = _createElementVNode(\"h2\", {\n    class: \"section-title\"\n  }, \"我的订单\", -1)), _createElementVNode(\"div\", _hoisted_6, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.orders, order => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: order.id,\n      class: \"order-card\"\n    }, [_createElementVNode(\"div\", _hoisted_7, [_createElementVNode(\"span\", _hoisted_8, \"订单号: \" + _toDisplayString(order.id), 1), _createElementVNode(\"span\", {\n      class: _normalizeClass([\"order-status\", order.status])\n    }, _toDisplayString($options.getOrderStatusText(order.status)), 3)]), _createElementVNode(\"div\", _hoisted_9, [_createElementVNode(\"div\", _hoisted_10, [_createElementVNode(\"div\", _hoisted_11, \"¥\" + _toDisplayString(order.total_price), 1), _createElementVNode(\"div\", _hoisted_12, _toDisplayString($options.formatDate(order.created_at)), 1)]), _createElementVNode(\"button\", {\n      onClick: $event => $options.viewOrderDetails(order.id),\n      class: \"view-details-btn\"\n    }, \" 查看详情 \", 8, _hoisted_13)])]);\n  }), 128))])])) : _createCommentVNode(\"\", true), $options.isAdmin || $options.isSuperAdmin ? (_openBlock(), _createElementBlock(\"div\", _hoisted_14, [_createElementVNode(\"div\", _hoisted_15, [_createVNode(_component_router_link, {\n    to: \"/articles/new\",\n    class: \"feature-card admin\"\n  }, {\n    default: _withCtx(() => _cache[8] || (_cache[8] = [_createElementVNode(\"div\", {\n      class: \"card-icon\"\n    }, \"📝\", -1), _createElementVNode(\"span\", {\n      class: \"card-title\"\n    }, \"文章编写\", -1)])),\n    _: 1\n  }), _createElementVNode(\"div\", {\n    class: \"feature-card admin\",\n    onClick: _cache[1] || (_cache[1] = (...args) => $options.openAdminPanel && $options.openAdminPanel(...args))\n  }, _cache[9] || (_cache[9] = [_createElementVNode(\"div\", {\n    class: \"card-icon\"\n  }, \"⚙️\", -1), _createElementVNode(\"span\", {\n    class: \"card-title\"\n  }, \"管理模块\", -1)])), _createVNode(_component_router_link, {\n    to: \"/canteenadmin\",\n    class: \"feature-card admin\"\n  }, {\n    default: _withCtx(() => _cache[10] || (_cache[10] = [_createElementVNode(\"div\", {\n      class: \"card-icon\"\n    }, \"🏪\", -1), _createElementVNode(\"span\", {\n      class: \"card-title\"\n    }, \"食堂管理\", -1)])),\n    _: 1\n  }), _createVNode(_component_router_link, {\n    to: \"/canteen/orders\",\n    class: \"feature-card admin\"\n  }, {\n    default: _withCtx(() => _cache[11] || (_cache[11] = [_createElementVNode(\"div\", {\n      class: \"card-icon\"\n    }, \"📦\", -1), _createElementVNode(\"span\", {\n      class: \"card-title\"\n    }, \"订单管理\", -1)])),\n    _: 1\n  }), _createVNode(_component_router_link, {\n    to: \"/managefeedback\",\n    class: \"feature-card admin\"\n  }, {\n    default: _withCtx(() => _cache[12] || (_cache[12] = [_createElementVNode(\"div\", {\n      class: \"card-icon\"\n    }, \"📢\", -1), _createElementVNode(\"span\", {\n      class: \"card-title\"\n    }, \"意见反馈\", -1)])),\n    _: 1\n  }), _createVNode(_component_router_link, {\n    to: \"/adminvotes\",\n    class: \"feature-card admin\"\n  }, {\n    default: _withCtx(() => _cache[13] || (_cache[13] = [_createElementVNode(\"div\", {\n      class: \"card-icon\"\n    }, \"🗳️\", -1), _createElementVNode(\"span\", {\n      class: \"card-title\"\n    }, \"管理投票\", -1)])),\n    _: 1\n  })])])) : _createCommentVNode(\"\", true), _createVNode(_component_el_dialog, {\n    modelValue: $data.dialogVisible,\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $data.dialogVisible = $event),\n    title: \"管理模块\",\n    width: \"90%\",\n    fullscreen: $data.isMobile,\n    \"before-close\": $options.handleClose,\n    \"close-on-click-modal\": false,\n    class: \"admin-dialog\"\n  }, {\n    footer: _withCtx(() => [_createElementVNode(\"div\", _hoisted_35, [_createVNode(_component_el_button, {\n      onClick: $options.closeDialog,\n      type: \"primary\"\n    }, {\n      default: _withCtx(() => _cache[18] || (_cache[18] = [_createTextVNode(\"关闭\")])),\n      _: 1\n    }, 8, [\"onClick\"])])]),\n    default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_16, [_createElementVNode(\"div\", _hoisted_17, [_cache[14] || (_cache[14] = _createElementVNode(\"h3\", null, \"管理员和用户列表\", -1)), $options.isAdmin && !$options.isSuperAdmin ? (_openBlock(), _createElementBlock(\"div\", _hoisted_18, [_createVNode(_component_el_alert, {\n      title: \"提示：您可以查看用户列表，但只有超级管理员可以修改权限\",\n      type: \"info\",\n      closable: false,\n      \"show-icon\": \"\"\n    })])) : _createCommentVNode(\"\", true)]), _withDirectives((_openBlock(), _createElementBlock(\"div\", _hoisted_19, [$data.error ? (_openBlock(), _createElementBlock(\"div\", _hoisted_20, _toDisplayString($data.error), 1)) : (_openBlock(), _createElementBlock(_Fragment, {\n      key: 1\n    }, [_createElementVNode(\"div\", _hoisted_21, [_cache[15] || (_cache[15] = _createElementVNode(\"h4\", null, \"管理员列表\", -1)), _createElementVNode(\"div\", _hoisted_22, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.admins, admin => {\n      return _openBlock(), _createElementBlock(\"div\", {\n        key: admin.id,\n        class: \"user-card\"\n      }, [_createElementVNode(\"div\", _hoisted_23, [_createElementVNode(\"span\", _hoisted_24, _toDisplayString(admin.username), 1), _createElementVNode(\"span\", {\n        class: _normalizeClass([\"role-badge\", {\n          'super': admin.role === 'super_admin'\n        }])\n      }, _toDisplayString(admin.role === 'super_admin' ? '超级管理员' : '管理员'), 3)]), $options.isSuperAdmin && admin.role !== 'super_admin' ? (_openBlock(), _createElementBlock(\"div\", _hoisted_25, [_createElementVNode(\"button\", {\n        onClick: $event => $options.demoteUser(admin.id),\n        class: \"action-btn demote\"\n      }, \"降为用户\", 8, _hoisted_26), _createElementVNode(\"button\", {\n        onClick: $event => $options.deleteUser(admin.id),\n        class: \"action-btn delete\"\n      }, \"删除\", 8, _hoisted_27)])) : _createCommentVNode(\"\", true)]);\n    }), 128))])]), _createElementVNode(\"div\", _hoisted_28, [_cache[17] || (_cache[17] = _createElementVNode(\"h4\", null, \"用户列表\", -1)), _createElementVNode(\"div\", _hoisted_29, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.users, user => {\n      return _openBlock(), _createElementBlock(\"div\", {\n        key: user.id,\n        class: \"user-card\"\n      }, [_createElementVNode(\"div\", _hoisted_30, [_createElementVNode(\"span\", _hoisted_31, _toDisplayString(user.username), 1), _cache[16] || (_cache[16] = _createElementVNode(\"span\", {\n        class: \"role-badge\"\n      }, \"用户\", -1))]), $options.isSuperAdmin ? (_openBlock(), _createElementBlock(\"div\", _hoisted_32, [_createElementVNode(\"button\", {\n        onClick: $event => $options.promoteUser(user.id),\n        class: \"action-btn promote\"\n      }, \"升为管理员\", 8, _hoisted_33), _createElementVNode(\"button\", {\n        onClick: $event => $options.deleteUser(user.id),\n        class: \"action-btn delete\"\n      }, \"删除\", 8, _hoisted_34)])) : _createCommentVNode(\"\", true)]);\n    }), 128))])])], 64))])), [[_directive_loading, $data.loading]])])]),\n    _: 1\n  }, 8, [\"modelValue\", \"fullscreen\", \"before-close\"])])) : (_openBlock(), _createElementBlock(\"div\", _hoisted_36, [_cache[20] || (_cache[20] = _createElementVNode(\"div\", {\n    class: \"prompt-icon\"\n  }, \"🔒\", -1)), _cache[21] || (_cache[21] = _createElementVNode(\"p\", null, \"请登录以查看内容\", -1)), _createVNode(_component_router_link, {\n    to: \"/login\",\n    class: \"login-btn\"\n  }, {\n    default: _withCtx(() => _cache[19] || (_cache[19] = [_createTextVNode(\"立即登录\")])),\n    _: 1\n  })]))])]);\n}","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}