{"ast":null,"code":"import { createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, vModelText as _vModelText, withDirectives as _withDirectives, vModelDynamic as _vModelDynamic, toDisplayString as _toDisplayString, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, withModifiers as _withModifiers, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"login-page\"\n};\nconst _hoisted_2 = {\n  class: \"login-container\"\n};\nconst _hoisted_3 = {\n  class: \"form-group\"\n};\nconst _hoisted_4 = {\n  class: \"form-group\"\n};\nconst _hoisted_5 = {\n  class: \"password-input\"\n};\nconst _hoisted_6 = [\"type\"];\nconst _hoisted_7 = {\n  class: \"form-footer\"\n};\nconst _hoisted_8 = [\"disabled\"];\nconst _hoisted_9 = {\n  class: \"button-icon\"\n};\nconst _hoisted_10 = {\n  class: \"register-link\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_router_link = _resolveComponent(\"router-link\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_cache[8] || (_cache[8] = _createElementVNode(\"div\", {\n    class: \"login-header\"\n  }, [_createElementVNode(\"div\", {\n    class: \"logo-container\"\n  }, [_createElementVNode(\"span\", {\n    class: \"logo-icon\"\n  }, \"🏠\")]), _createElementVNode(\"h2\", null, \"欢迎回来\"), _createElementVNode(\"p\", {\n    class: \"subtitle\"\n  }, \"请登录您的账户\")], -1 /* HOISTED */)), _createElementVNode(\"form\", {\n    onSubmit: _cache[3] || (_cache[3] = _withModifiers((...args) => $options.login && $options.login(...args), [\"prevent\"])),\n    class: \"login-form\"\n  }, [_createElementVNode(\"div\", _hoisted_3, [_cache[4] || (_cache[4] = _createElementVNode(\"label\", null, [_createElementVNode(\"span\", {\n    class: \"label-icon\"\n  }, \"📧\"), _createTextVNode(\" 邮箱 \")], -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"input\", {\n    type: \"email\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.email = $event),\n    required: \"\",\n    placeholder: \"请输入您的邮箱地址\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.email]])]), _createElementVNode(\"div\", _hoisted_4, [_cache[5] || (_cache[5] = _createElementVNode(\"label\", null, [_createElementVNode(\"span\", {\n    class: \"label-icon\"\n  }, \"🔒\"), _createTextVNode(\" 密码 \")], -1 /* HOISTED */)), _createElementVNode(\"div\", _hoisted_5, [_withDirectives(_createElementVNode(\"input\", {\n    type: $data.showPassword ? 'text' : 'password',\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.password = $event),\n    required: \"\",\n    placeholder: \"请输入您的密码\"\n  }, null, 8 /* PROPS */, _hoisted_6), [[_vModelDynamic, $data.password]]), _createElementVNode(\"button\", {\n    type: \"button\",\n    class: \"toggle-password\",\n    onClick: _cache[2] || (_cache[2] = $event => $data.showPassword = !$data.showPassword)\n  }, _toDisplayString($data.showPassword ? '👁️' : '👁️‍🗨️'), 1 /* TEXT */)])]), _createElementVNode(\"div\", _hoisted_7, [_createElementVNode(\"button\", {\n    type: \"submit\",\n    class: \"login-button\",\n    disabled: $data.loading\n  }, [_createElementVNode(\"span\", _hoisted_9, _toDisplayString($data.loading ? '⌛' : '🔑'), 1 /* TEXT */), _createTextVNode(\" \" + _toDisplayString($data.loading ? '登录中...' : '登录'), 1 /* TEXT */)], 8 /* PROPS */, _hoisted_8), _createElementVNode(\"p\", _hoisted_10, [_cache[7] || (_cache[7] = _createTextVNode(\" 还没有账号？ \")), _createVNode(_component_router_link, {\n    to: \"/register\"\n  }, {\n    default: _withCtx(() => _cache[6] || (_cache[6] = [_createTextVNode(\"立即注册\")])),\n    _: 1 /* STABLE */\n  })])])], 32 /* NEED_HYDRATION */)])]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","onSubmit","_cache","_withModifiers","args","$options","login","_hoisted_3","_createTextVNode","type","$event","$data","email","required","placeholder","_hoisted_4","_hoisted_5","showPassword","password","_hoisted_6","onClick","_hoisted_7","disabled","loading","_hoisted_9","_toDisplayString","_hoisted_8","_hoisted_10","_createVNode","_component_router_link","to","default","_withCtx","_"],"sources":["C:\\Users\\拯救者\\Desktop\\text\\community-service\\src\\components\\UserLogin.vue"],"sourcesContent":["<template>\n  <div class=\"login-page\">\n    <div class=\"login-container\">\n      <div class=\"login-header\">\n        <div class=\"logo-container\">\n          <span class=\"logo-icon\">🏠</span>\n        </div>\n        <h2>欢迎回来</h2>\n        <p class=\"subtitle\">请登录您的账户</p>\n      </div>\n\n      <form @submit.prevent=\"login\" class=\"login-form\">\n        <div class=\"form-group\">\n          <label>\n            <span class=\"label-icon\">📧</span>\n            邮箱\n          </label>\n          <input \n            type=\"email\" \n            v-model=\"email\" \n            required \n            placeholder=\"请输入您的邮箱地址\"\n          />\n        </div>\n\n        <div class=\"form-group\">\n          <label>\n            <span class=\"label-icon\">🔒</span>\n            密码\n          </label>\n          <div class=\"password-input\">\n            <input \n              :type=\"showPassword ? 'text' : 'password'\"\n              v-model=\"password\" \n              required \n              placeholder=\"请输入您的密码\"\n            />\n            <button \n              type=\"button\" \n              class=\"toggle-password\"\n              @click=\"showPassword = !showPassword\"\n            >\n              {{ showPassword ? '👁️' : '👁️‍🗨️' }}\n            </button>\n          </div>\n        </div>\n\n        <div class=\"form-footer\">\n          <button type=\"submit\" class=\"login-button\" :disabled=\"loading\">\n            <span class=\"button-icon\">{{ loading ? '⌛' : '🔑' }}</span>\n            {{ loading ? '登录中...' : '登录' }}\n          </button>\n          <p class=\"register-link\">\n            还没有账号？\n            <router-link to=\"/register\">立即注册</router-link>\n          </p>\n        </div>\n      </form>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from 'axios';\nconst API = process.env.VUE_APP_API_URL;\n\nexport default {\n  name: 'UserLogin',\n  data() {\n    return {\n      email: '',\n      password: '',\n      loading: false,\n      showPassword: false\n    };\n  },\n  methods: {\n    async login() {\n      this.loading = true;\n      try {\n        const response = await axios.post(`${API}/login`, {\n          email: this.email,\n          password: this.password,\n        });\n\n        const { token, user } = response.data;\n        \n        // 存储认证信息\n        localStorage.setItem('authToken', token);\n        localStorage.setItem('userRole', user.role);\n        localStorage.setItem('username', user.username);\n        localStorage.setItem('userId', user.id);\n        localStorage.setItem('email', user.email);\n\n        // 根据角色重定向\n        switch(user.role) {\n          case 'super_admin':\n            await this.$router.push('/profile');\n            break;\n          case 'admin':\n            await this.$router.push('/profile');\n            break;\n          default:\n            await this.$router.push('/profile');\n        }\n      } catch (error) {\n        let errorMessage = '登录失败，请重试';\n        if (error.response?.data?.message) {\n          errorMessage = error.response.data.message;\n        }\n        alert(errorMessage);\n      } finally {\n        this.loading = false;\n      }\n    }\n  }\n};\n</script>\n\n<style scoped>\n:root {\n  --primary-color: #4CAF50;\n  --secondary-color: #2196F3;\n  --background-color: #f5f7fa;\n  --text-primary: #333333;\n  --text-secondary: #666666;\n  --border-radius: 12px;\n  --box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\n  --transition-speed: 0.3s;\n}\n\n.login-page {\n  min-height: 100vh;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);\n  padding: 20px;\n}\n\n.login-container {\n  background: white;\n  border-radius: var(--border-radius);\n  box-shadow: var(--box-shadow);\n  width: 100%;\n  max-width: 400px;\n  padding: 2rem;\n  animation: slideUp 0.5s ease-out;\n}\n\n@keyframes slideUp {\n  from {\n    opacity: 0;\n    transform: translateY(20px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n.login-header {\n  text-align: center;\n  margin-bottom: 2rem;\n}\n\n.logo-container {\n  width: 80px;\n  height: 80px;\n  margin: 0 auto 1rem;\n  background: var(--background-color);\n  border-radius: 50%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.logo-icon {\n  font-size: 2.5rem;\n}\n\n.login-header h2 {\n  color: var(--text-primary);\n  margin: 0;\n  font-size: 1.8rem;\n}\n\n.subtitle {\n  color: var(--text-secondary);\n  margin-top: 0.5rem;\n}\n\n.login-form {\n  display: flex;\n  flex-direction: column;\n  gap: 1.5rem;\n}\n\n.form-group {\n  display: flex;\n  flex-direction: column;\n  gap: 0.5rem;\n}\n\n.form-group label {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  color: var(--text-secondary);\n  font-size: 0.9rem;\n}\n\n.label-icon {\n  font-size: 1.2rem;\n}\n\n.password-input {\n  position: relative;\n  display: flex;\n  align-items: center;\n}\n\n.toggle-password {\n  position: absolute;\n  right: 10px;\n  background: none;\n  border: none;\n  cursor: pointer;\n  padding: 0;\n  font-size: 1.2rem;\n}\n\ninput {\n  padding: 0.8rem 1rem;\n  border: 1px solid #ddd;\n  border-radius: var(--border-radius);\n  font-size: 1rem;\n  transition: all var(--transition-speed);\n}\n\ninput:focus {\n  outline: none;\n  border-color: var(--primary-color);\n  box-shadow: 0 0 0 2px rgba(76, 175, 80, 0.1);\n}\n\n.form-footer {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 1rem;\n}\n\n.login-button {\n  width: 100%;\n  padding: 0.8rem;\n  background: var(--primary-color);\n  color: white;\n  border: none;\n  border-radius: var(--border-radius);\n  font-size: 1rem;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 0.5rem;\n  transition: all var(--transition-speed);\n}\n\n.login-button:hover {\n  background: #43a047;\n  transform: translateY(-1px);\n  box-shadow: 0 4px 12px rgba(76, 175, 80, 0.2);\n}\n\n.login-button:disabled {\n  background: #cccccc;\n  cursor: not-allowed;\n  transform: none;\n  box-shadow: none;\n}\n\n.button-icon {\n  font-size: 1.2rem;\n}\n\n.register-link {\n  color: var(--text-secondary);\n  font-size: 0.9rem;\n}\n\n.register-link a {\n  color: var(--primary-color);\n  text-decoration: none;\n  font-weight: 500;\n  transition: color var(--transition-speed);\n}\n\n.register-link a:hover {\n  color: #43a047;\n}\n\n/* 暗色模式支持 */\n@media (prefers-color-scheme: dark) {\n  .login-page {\n    background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%);\n  }\n\n  .login-container {\n    background: #2d2d2d;\n  }\n\n  .logo-container {\n    background: rgba(255, 255, 255, 0.1);\n  }\n\n  .login-header h2 {\n    color: #ffffff;\n  }\n\n  .subtitle {\n    color: #b0b0b0;\n  }\n\n  input {\n    background: #363636;\n    border-color: #4a4a4a;\n    color: white;\n  }\n\n  input:focus {\n    border-color: var(--primary-color);\n    box-shadow: 0 0 0 2px rgba(76, 175, 80, 0.2);\n  }\n\n  .register-link {\n    color: #b0b0b0;\n  }\n\n  .toggle-password {\n    color: #b0b0b0;\n  }\n}\n\n/* 响应式设计 */\n@media screen and (max-width: 480px) {\n  .login-container {\n    padding: 1.5rem;\n  }\n\n  .logo-container {\n    width: 60px;\n    height: 60px;\n  }\n\n  .logo-icon {\n    font-size: 2rem;\n  }\n\n  .login-header h2 {\n    font-size: 1.5rem;\n  }\n\n  input {\n    font-size: 0.9rem;\n  }\n}\n</style>\n"],"mappings":";;EACOA,KAAK,EAAC;AAAY;;EAChBA,KAAK,EAAC;AAAiB;;EAUnBA,KAAK,EAAC;AAAY;;EAalBA,KAAK,EAAC;AAAY;;EAKhBA,KAAK,EAAC;AAAgB;mBA9BrC;;EA+CaA,KAAK,EAAC;AAAa;mBA/ChC;;EAiDkBA,KAAK,EAAC;AAAa;;EAGxBA,KAAK,EAAC;AAAe;;;uBAnDhCC,mBAAA,CA0DM,OA1DNC,UA0DM,GAzDJC,mBAAA,CAwDM,OAxDNC,UAwDM,G,0BAvDJD,mBAAA,CAMM;IANDH,KAAK,EAAC;EAAc,IACvBG,mBAAA,CAEM;IAFDH,KAAK,EAAC;EAAgB,IACzBG,mBAAA,CAAiC;IAA3BH,KAAK,EAAC;EAAW,GAAC,IAAE,E,GAE5BG,mBAAA,CAAa,YAAT,MAAI,GACRA,mBAAA,CAA+B;IAA5BH,KAAK,EAAC;EAAU,GAAC,SAAO,E,sBAG7BG,mBAAA,CA8CO;IA9CAE,QAAM,EAAAC,MAAA,QAAAA,MAAA,MAXnBC,cAAA,KAAAC,IAAA,KAW6BC,QAAA,CAAAC,KAAA,IAAAD,QAAA,CAAAC,KAAA,IAAAF,IAAA,CAAK;IAAER,KAAK,EAAC;MAClCG,mBAAA,CAWM,OAXNQ,UAWM,G,0BAVJR,mBAAA,CAGQ,gBAFNA,mBAAA,CAAkC;IAA5BH,KAAK,EAAC;EAAY,GAAC,IAAE,GAdvCY,gBAAA,CAc8C,MAEpC,E,sCACAT,mBAAA,CAKE;IAJAU,IAAI,EAAC,OAAO;IAlBxB,uBAAAP,MAAA,QAAAA,MAAA,MAAAQ,MAAA,IAmBqBC,KAAA,CAAAC,KAAK,GAAAF,MAAA;IACdG,QAAQ,EAAR,EAAQ;IACRC,WAAW,EAAC;iDAFHH,KAAA,CAAAC,KAAK,E,KAMlBb,mBAAA,CAoBM,OApBNgB,UAoBM,G,0BAnBJhB,mBAAA,CAGQ,gBAFNA,mBAAA,CAAkC;IAA5BH,KAAK,EAAC;EAAY,GAAC,IAAE,GA3BvCY,gBAAA,CA2B8C,MAEpC,E,sBACAT,mBAAA,CAcM,OAdNiB,UAcM,G,gBAbJjB,mBAAA,CAKE;IAJCU,IAAI,EAAEE,KAAA,CAAAM,YAAY;IAhCjC,uBAAAf,MAAA,QAAAA,MAAA,MAAAQ,MAAA,IAiCuBC,KAAA,CAAAO,QAAQ,GAAAR,MAAA;IACjBG,QAAQ,EAAR,EAAQ;IACRC,WAAW,EAAC;0BAnC1BK,UAAA,I,iBAiCuBR,KAAA,CAAAO,QAAQ,E,GAInBnB,mBAAA,CAMS;IALPU,IAAI,EAAC,QAAQ;IACbb,KAAK,EAAC,iBAAiB;IACtBwB,OAAK,EAAAlB,MAAA,QAAAA,MAAA,MAAAQ,MAAA,IAAEC,KAAA,CAAAM,YAAY,IAAIN,KAAA,CAAAM,YAAY;sBAEjCN,KAAA,CAAAM,YAAY,qC,KAKrBlB,mBAAA,CASM,OATNsB,UASM,GARJtB,mBAAA,CAGS;IAHDU,IAAI,EAAC,QAAQ;IAACb,KAAK,EAAC,cAAc;IAAE0B,QAAQ,EAAEX,KAAA,CAAAY;MACpDxB,mBAAA,CAA2D,QAA3DyB,UAA2D,EAAAC,gBAAA,CAA9Bd,KAAA,CAAAY,OAAO,+BAjDhDf,gBAAA,CAiDuE,GAC3D,GAAAiB,gBAAA,CAAGd,KAAA,CAAAY,OAAO,mC,iBAlDtBG,UAAA,GAoDU3B,mBAAA,CAGI,KAHJ4B,WAGI,G,0BAvDdnB,gBAAA,CAoDmC,UAEvB,IAAAoB,YAAA,CAA8CC,sBAAA;IAAjCC,EAAE,EAAC;EAAW;IAtDvCC,OAAA,EAAAC,QAAA,CAsDwC,MAAI9B,MAAA,QAAAA,MAAA,OAtD5CM,gBAAA,CAsDwC,MAAI,E;IAtD5CyB,CAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}