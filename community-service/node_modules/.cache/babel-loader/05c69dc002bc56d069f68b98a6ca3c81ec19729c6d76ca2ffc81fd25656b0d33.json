{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from 'axios';\nimport { handleApiError } from '../utils/errorHandler';\nconst API = process.env.VUE_APP_API_URL;\nexport default {\n  name: 'OrderDetail',\n  data() {\n    return {\n      order: null,\n      loading: true,\n      statusText: {\n        0: '待处理',\n        1: '处理中',\n        2: '已完成',\n        3: '已取消'\n      }\n    };\n  },\n  async created() {\n    await this.fetchOrderDetails();\n  },\n  methods: {\n    getStatusType(status) {\n      const typeMap = {\n        0: 'info',\n        // 待处理\n        1: 'warning',\n        // 处理中\n        2: 'success',\n        // 已完成\n        3: 'danger' // 已取消\n      };\n      return typeMap[status] || 'info';\n    },\n    async fetchOrderDetails() {\n      const orderId = this.$route.params.orderId;\n      try {\n        const response = await axios.get(`${API}/canteen/order/${orderId}`, {\n          headers: {\n            Authorization: `Bearer ${localStorage.getItem('authToken')}`\n          }\n        });\n        const orderData = response.data;\n        if (orderData && orderData.user) {\n          this.order = {\n            ...orderData,\n            email: orderData.user.email,\n            username: orderData.user.username\n          };\n        } else {\n          this.order = orderData;\n        }\n        this.loading = false;\n      } catch (error) {\n        console.error('获取订单详情失败:', error);\n        handleApiError(error);\n      }\n    },\n    formatDate(dateString) {\n      if (!dateString) return '暂无日期';\n      try {\n        const date = new Date(dateString);\n        if (isNaN(date.getTime())) return '无效日期';\n        const options = {\n          year: 'numeric',\n          month: '2-digit',\n          day: '2-digit',\n          hour: '2-digit',\n          minute: '2-digit',\n          hour12: false\n        };\n        return date.toLocaleString('zh-CN', options).replace(/\\//g, '-');\n      } catch (error) {\n        console.error('日期格式化错误:', error);\n        return '日期格式错误';\n      }\n    },\n    goBack() {\n      this.$router.push('/discover');\n    }\n  }\n};","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}