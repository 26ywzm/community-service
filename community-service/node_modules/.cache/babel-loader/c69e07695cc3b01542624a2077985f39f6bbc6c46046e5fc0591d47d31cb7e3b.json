{"ast":null,"code":"import axios from 'axios';\nimport { ElMessage } from 'element-plus';\nconst API = 'http://localhost:3000/api/auth'; // 直接定义 API 地址\n\nexport default {\n  data() {\n    return {\n      orders: [],\n      // 存储所有订单信息\n      showDialog: false,\n      dialogMessage: '',\n      lastActionTime: 0,\n      // 记录上一次操作的时间戳\n      loading: false,\n      isMobile: false,\n      currentPage: 1,\n      pageSize: 10,\n      total: 0,\n      // 状态显示文本\n      statusText: {\n        0: '待处理',\n        1: '处理中',\n        2: '已完成',\n        3: '已取消'\n      }\n    };\n  },\n  mounted() {\n    this.checkDeviceType();\n    window.addEventListener('resize', this.checkDeviceType);\n    this.fetchOrders(); // 加载所有订单\n  },\n  beforeUnmount() {\n    window.removeEventListener('resize', this.checkDeviceType);\n  },\n  methods: {\n    checkDeviceType() {\n      this.isMobile = window.innerWidth <= 768;\n    },\n    async fetchOrders() {\n      try {\n        this.loading = true;\n        const response = await axios.get(`${API}/canteen/orders`, {\n          headers: {\n            'Authorization': `Bearer ${localStorage.getItem('authToken')}`\n          }\n        });\n        console.log('获取到的订单数据:', response.data);\n\n        // 处理订单数据\n        this.orders = response.data.orders.map(order => ({\n          ...order,\n          lastActionTime: 0,\n          items: order.items || [] // 确保 items 存在\n        }));\n\n        // 更新分页信息\n        if (response.data.pagination) {\n          this.pagination = response.data.pagination;\n          this.currentPage = response.data.pagination.currentPage;\n          this.pageSize = response.data.pagination.pageSize;\n          this.total = response.data.pagination.total;\n        }\n      } catch (error) {\n        console.error('获取订单列表失败:', error);\n        ElMessage.error('获取订单列表失败');\n      } finally {\n        this.loading = false;\n      }\n    },\n    async handleButtonClick(order) {\n      if (!this.canPerformAction(order)) {\n        ElMessage.warning('操作太频繁，请稍后再试');\n        return;\n      }\n      try {\n        let newStatus;\n        const currentStatus = parseInt(order.status);\n        switch (currentStatus) {\n          case 0:\n            // pending\n            newStatus = 1; // confirmed\n            break;\n          case 1:\n            // confirmed\n            newStatus = 2; // completed\n            break;\n          default:\n            ElMessage.error(`当前状态 ${this.statusText[order.status]} 无法进行操作`);\n            return;\n        }\n        await this.updateOrderStatus(order, newStatus);\n        // 操作成功后刷新订单列表\n        await this.fetchOrders();\n      } catch (error) {\n        console.error('操作失败:', error);\n        ElMessage.error('操作失败，请重试');\n      }\n    },\n    canPerformAction(order) {\n      const now = Date.now();\n      // 如果是第一次操作，或者距离上次操作超过3秒\n      if (!order.lastActionTime || now - order.lastActionTime > 3000) {\n        return true;\n      }\n      return false;\n    },\n    async updateOrderStatus(order, status) {\n      try {\n        console.log('Updating order status:', {\n          orderId: order.id,\n          status: status\n        });\n        await axios.put(`${API}/canteen/orders/${order.id}`, {\n          status\n        }, {\n          headers: {\n            'Authorization': `Bearer ${localStorage.getItem('authToken')}`,\n            'Content-Type': 'application/json'\n          }\n        });\n        ElMessage.success(`订单状态已更新为${this.statusText[status]}`);\n        order.lastActionTime = Date.now(); // 更新最后操作时间\n        order.status = status; // 更新本地状态\n      } catch (error) {\n        console.error('更新订单状态失败:', error);\n        ElMessage.error(error.response?.data?.message || '更新订单状态失败，请重试');\n        throw error;\n      }\n    },\n    async handleDeleteOrder(order) {\n      try {\n        if (!confirm('确定要删除这个订单吗？此操作不可撤销。')) {\n          return;\n        }\n        await axios.delete(`${API}/canteen/orders/${order.id}`, {\n          headers: {\n            'Authorization': `Bearer ${localStorage.getItem('authToken')}`\n          }\n        });\n        ElMessage.success('订单已删除');\n        // 从列表中移除该订单\n        this.orders = this.orders.filter(o => o.id !== order.id);\n      } catch (error) {\n        console.error('删除订单失败:', error);\n        ElMessage.error(error.response?.data?.message || '删除订单失败，请重试');\n      }\n    },\n    closeDialog() {\n      this.showDialog = false;\n      this.dialogMessage = '';\n    },\n    formatDate(dateString) {\n      const date = new Date(dateString);\n      return {\n        date: date.toLocaleDateString('zh-CN', {\n          year: 'numeric',\n          month: '2-digit',\n          day: '2-digit'\n        }),\n        time: date.toLocaleTimeString('zh-CN', {\n          hour: '2-digit',\n          minute: '2-digit'\n        })\n      };\n    },\n    getStatusType(status) {\n      switch (status) {\n        case 0:\n          return 'danger';\n        case 1:\n          return 'success';\n        case 2:\n          return 'info';\n        default:\n          return 'warning';\n      }\n    },\n    getStatusText(status) {\n      return this.statusText[status];\n    },\n    confirmDelete(order) {\n      if (!confirm('确定要删除这个订单吗？此操作不可撤销。')) {\n        return;\n      }\n      this.handleDeleteOrder(order);\n    }\n  }\n};","map":{"version":3,"names":["axios","ElMessage","API","data","orders","showDialog","dialogMessage","lastActionTime","loading","isMobile","currentPage","pageSize","total","statusText","mounted","checkDeviceType","window","addEventListener","fetchOrders","beforeUnmount","removeEventListener","methods","innerWidth","response","get","headers","localStorage","getItem","console","log","map","order","items","pagination","error","handleButtonClick","canPerformAction","warning","newStatus","currentStatus","parseInt","status","updateOrderStatus","now","Date","orderId","id","put","success","message","handleDeleteOrder","confirm","delete","filter","o","closeDialog","formatDate","dateString","date","toLocaleDateString","year","month","day","time","toLocaleTimeString","hour","minute","getStatusType","getStatusText","confirmDelete"],"sources":["C:\\Users\\拯救者\\Desktop\\text\\community-service\\src\\components\\OrderManagement.vue"],"sourcesContent":["<template>\n  <div class=\"order-management\">\n    <h2>订单管理</h2>\n    <div v-if=\"loading\" class=\"loading\">加载中...</div>\n    <div v-else>\n      <div class=\"order-list\">\n        <!-- 移动端订单卡片 -->\n        <div class=\"order-cards\" v-if=\"isMobile\">\n          <el-card v-for=\"order in orders\" :key=\"order.id\" class=\"order-card\">\n            <div class=\"order-header\">\n              <div class=\"order-info\">\n                <span class=\"order-id\">订单 #{{ order.id }}</span>\n                <el-tag :type=\"getStatusType(order.status)\" size=\"small\">\n                  {{ getStatusText(order.status) }}\n                </el-tag>\n              </div>\n              <div class=\"user-info\">\n                <span>{{ order.username }}</span>\n                <span class=\"email\">{{ order.email }}</span>\n              </div>\n            </div>\n            \n            <div class=\"order-items\">\n              <div v-for=\"item in order.items\" :key=\"item.menu_item_id\" class=\"order-item\">\n                <div class=\"item-info\">\n                  <span class=\"item-name\">{{ item.name }}</span>\n                  <div class=\"item-details\">\n                    <span class=\"item-quantity\">数量: {{ item.quantity }}</span>\n                    <span class=\"item-price\">单价: ¥{{ item.price }}</span>\n                    <span class=\"item-total\">小计: ¥{{ item.quantity * item.price }}</span>\n                  </div>\n                </div>\n              </div>\n            </div>\n            \n            <div class=\"order-footer\">\n              <div class=\"total-price\">总价: ¥{{ order.total_price }}</div>\n              <div class=\"order-actions\">\n                <el-button \n                  type=\"danger\" \n                  size=\"small\" \n                  @click=\"confirmDelete(order)\"\n                  :loading=\"order.lastActionTime > 0\"\n                >\n                  删除订单\n                </el-button>\n                <button \n                  v-if=\"parseInt(order.status) === 0\" \n                  class=\"btn-confirm\"\n                  @click=\"handleButtonClick(order)\"\n                >开始处理</button>\n\n                <button \n                  v-if=\"parseInt(order.status) === 1\" \n                  class=\"btn-complete\"\n                  @click=\"handleButtonClick(order)\"\n                >完成订单</button>\n\n                <button \n                  v-if=\"parseInt(order.status) === 2\" \n                  class=\"btn-delete\"\n                  @click=\"handleDeleteOrder(order)\"\n                >删除订单</button>\n              </div>\n            </div>\n          </el-card>\n        </div>\n\n        <!-- PC端表格视图 -->\n        <el-table v-else :data=\"orders\" style=\"width: 100%\" v-loading=\"loading\">\n          <el-table-column prop=\"id\" label=\"订单ID\" width=\"100\" />\n          <el-table-column prop=\"username\" label=\"用户名\" width=\"150\" />\n          <el-table-column label=\"订单详情\" width=\"300\">\n            <template v-slot=\"slotProps\">\n              <div class=\"order-items\">\n                <div v-for=\"item in slotProps?.row?.items || []\" :key=\"item.menu_item_id\" class=\"order-item\">\n                  <div class=\"item-info\">\n                    <span class=\"item-name\">{{ item.name }}</span>\n                    <div class=\"item-details\">\n                      <span class=\"item-quantity\">数量: {{ item.quantity }}</span>\n                      <span class=\"item-price\">单价: ¥{{ item.price }}</span>\n                      <span class=\"item-total\">小计: ¥{{ item.quantity * item.price }}</span>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </template>\n          </el-table-column>\n          <el-table-column prop=\"total_price\" label=\"总价\" width=\"100\">\n            <template v-slot=\"slotProps\">\n              <span class=\"price\">¥{{ slotProps?.row?.total_price }}</span>\n            </template>\n          </el-table-column>\n          <el-table-column label=\"状态\" width=\"100\">\n            <template v-slot=\"slotProps\">\n              <el-tag :type=\"getStatusType(slotProps?.row?.status)\" size=\"small\">\n                {{ getStatusText(slotProps?.row?.status) }}\n              </el-tag>\n            </template>\n          </el-table-column>\n          <el-table-column label=\"创建时间\" width=\"200\">\n            <template v-slot=\"slotProps\">\n              <div class=\"time-info\">\n                <div>{{ formatDate(slotProps?.row?.created_at)?.date }}</div>\n                <div class=\"time\">{{ formatDate(slotProps?.row?.created_at)?.time }}</div>\n              </div>\n            </template>\n          </el-table-column>\n          <el-table-column label=\"操作\" width=\"200\">\n            <template v-slot=\"slotProps\">\n              <div class=\"order-actions\">\n                <button \n                  v-if=\"parseInt(slotProps?.row?.status) === 0\" \n                  class=\"btn-confirm\"\n                  @click=\"handleButtonClick(slotProps.row)\"\n                >开始处理</button>\n\n                <button \n                  v-if=\"parseInt(slotProps?.row?.status) === 1\" \n                  class=\"btn-complete\"\n                  @click=\"handleButtonClick(slotProps.row)\"\n                >完成订单</button>\n\n                <button \n                  v-if=\"parseInt(slotProps?.row?.status) === 2\" \n                  class=\"btn-delete\"\n                  @click=\"handleDeleteOrder(slotProps.row)\"\n                >删除订单</button>\n              </div>\n            </template>\n          </el-table-column>\n        </el-table>\n      </div>\n\n      <div class=\"pagination-container\">\n        <el-pagination\n          v-model:current-page=\"currentPage\"\n          :page-size=\"pageSize\"\n          :total=\"total\"\n          @current-change=\"handlePageChange\"\n          layout=\"prev, pager, next\"\n        />\n      </div>\n    </div>\n    <div v-if=\"orders.length === 0 && !loading\">\n      <p class=\"empty-message\">没有找到订单。</p>\n    </div>\n\n    <!-- 对话框 -->\n    <div v-if=\"showDialog\" class=\"dialog-overlay\">\n      <div class=\"dialog\">\n        <p>{{ dialogMessage }}</p>\n        <button @click=\"closeDialog\">确定</button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from 'axios';\nimport { ElMessage } from 'element-plus';\n\nconst API = 'http://localhost:3000/api/auth';  // 直接定义 API 地址\n\nexport default {\n  data() {\n    return {\n      orders: [], // 存储所有订单信息\n      showDialog: false,\n      dialogMessage: '',\n      lastActionTime: 0, // 记录上一次操作的时间戳\n      loading: false,\n      isMobile: false,\n      currentPage: 1,\n      pageSize: 10,\n      total: 0,\n      // 状态显示文本\n      statusText: {\n        0: '待处理',\n        1: '处理中',\n        2: '已完成',\n        3: '已取消'\n      }\n    };\n  },\n  mounted() {\n    this.checkDeviceType();\n    window.addEventListener('resize', this.checkDeviceType);\n    this.fetchOrders(); // 加载所有订单\n  },\n  beforeUnmount() {\n    window.removeEventListener('resize', this.checkDeviceType);\n  },\n  methods: {\n    checkDeviceType() {\n      this.isMobile = window.innerWidth <= 768;\n    },\n    async fetchOrders() {\n      try {\n        this.loading = true;\n        const response = await axios.get(`${API}/canteen/orders`, {\n          headers: {\n            'Authorization': `Bearer ${localStorage.getItem('authToken')}`\n          }\n        });\n        console.log('获取到的订单数据:', response.data);\n        \n        // 处理订单数据\n        this.orders = response.data.orders.map(order => ({\n          ...order,\n          lastActionTime: 0,\n          items: order.items || [] // 确保 items 存在\n        }));\n        \n        // 更新分页信息\n        if (response.data.pagination) {\n          this.pagination = response.data.pagination;\n          this.currentPage = response.data.pagination.currentPage;\n          this.pageSize = response.data.pagination.pageSize;\n          this.total = response.data.pagination.total;\n        }\n      } catch (error) {\n        console.error('获取订单列表失败:', error);\n        ElMessage.error('获取订单列表失败');\n      } finally {\n        this.loading = false;\n      }\n    },\n    \n    async handleButtonClick(order) {\n      if (!this.canPerformAction(order)) {\n        ElMessage.warning('操作太频繁，请稍后再试');\n        return;\n      }\n\n      try {\n        let newStatus;\n        const currentStatus = parseInt(order.status);\n        switch (currentStatus) {\n          case 0:  // pending\n            newStatus = 1;  // confirmed\n            break;\n          case 1:  // confirmed\n            newStatus = 2;  // completed\n            break;\n          default:\n            ElMessage.error(`当前状态 ${this.statusText[order.status]} 无法进行操作`);\n            return;\n        }\n\n        await this.updateOrderStatus(order, newStatus);\n        // 操作成功后刷新订单列表\n        await this.fetchOrders();\n      } catch (error) {\n        console.error('操作失败:', error);\n        ElMessage.error('操作失败，请重试');\n      }\n    },\n\n    canPerformAction(order) {\n      const now = Date.now();\n      // 如果是第一次操作，或者距离上次操作超过3秒\n      if (!order.lastActionTime || now - order.lastActionTime > 3000) {\n        return true;\n      }\n      return false;\n    },\n\n    async updateOrderStatus(order, status) {\n      try {\n        console.log('Updating order status:', { orderId: order.id, status: status });\n        await axios.put(\n          `${API}/canteen/orders/${order.id}`, \n          { status }, \n          {\n            headers: {\n              'Authorization': `Bearer ${localStorage.getItem('authToken')}`,\n              'Content-Type': 'application/json'\n            }\n          }\n        );\n        \n        ElMessage.success(`订单状态已更新为${this.statusText[status]}`);\n        order.lastActionTime = Date.now(); // 更新最后操作时间\n        order.status = status; // 更新本地状态\n      } catch (error) {\n        console.error('更新订单状态失败:', error);\n        ElMessage.error(error.response?.data?.message || '更新订单状态失败，请重试');\n        throw error;\n      }\n    },\n\n    async handleDeleteOrder(order) {\n      try {\n        if (!confirm('确定要删除这个订单吗？此操作不可撤销。')) {\n          return;\n        }\n        \n        await axios.delete(`${API}/canteen/orders/${order.id}`, {\n          headers: {\n            'Authorization': `Bearer ${localStorage.getItem('authToken')}`\n          }\n        });\n        \n        ElMessage.success('订单已删除');\n        // 从列表中移除该订单\n        this.orders = this.orders.filter(o => o.id !== order.id);\n      } catch (error) {\n        console.error('删除订单失败:', error);\n        ElMessage.error(error.response?.data?.message || '删除订单失败，请重试');\n      }\n    },\n\n    closeDialog() {\n      this.showDialog = false;\n      this.dialogMessage = '';\n    },\n\n    formatDate(dateString) {\n      const date = new Date(dateString);\n      return {\n        date: date.toLocaleDateString('zh-CN', {\n          year: 'numeric',\n          month: '2-digit',\n          day: '2-digit'\n        }),\n        time: date.toLocaleTimeString('zh-CN', {\n          hour: '2-digit',\n          minute: '2-digit'\n        })\n      };\n    },\n    getStatusType(status) {\n      switch (status) {\n        case 0:\n          return 'danger';\n        case 1:\n          return 'success';\n        case 2:\n          return 'info';\n        default:\n          return 'warning';\n      }\n    },\n    getStatusText(status) {\n      return this.statusText[status];\n    },\n    confirmDelete(order) {\n      if (!confirm('确定要删除这个订单吗？此操作不可撤销。')) {\n        return;\n      }\n      this.handleDeleteOrder(order);\n    }\n  }\n};\n</script>\n\n<style scoped>\n.order-management {\n  padding: 20px;\n  max-width: 1200px;\n  margin: 0 auto;\n}\n\n.order-list {\n  margin-top: 20px;\n}\n\n/* 移动端样式 */\n.order-cards {\n  display: flex;\n  flex-direction: column;\n  gap: 16px;\n}\n\n.order-card {\n  margin-bottom: 16px;\n}\n\n.order-header {\n  margin-bottom: 16px;\n}\n\n.order-info {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 8px;\n}\n\n.order-id {\n  font-weight: bold;\n  font-size: 16px;\n}\n\n.user-info {\n  font-size: 14px;\n  color: #606266;\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n}\n\n.email {\n  color: #909399;\n  font-size: 13px;\n}\n\n.order-items {\n  border-top: 1px solid #EBEEF5;\n  border-bottom: 1px solid #EBEEF5;\n  padding: 12px 0;\n  margin: 12px 0;\n}\n\n.order-item {\n  background-color: #f8f9fa;\n  border-radius: 4px;\n  padding: 12px;\n  margin-bottom: 8px;\n}\n\n.order-item:last-child {\n  margin-bottom: 0;\n}\n\n.item-info {\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n}\n\n.item-name {\n  font-weight: bold;\n  color: #303133;\n}\n\n.item-details {\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n  font-size: 13px;\n  color: #606266;\n}\n\n.item-total {\n  color: #409EFF;\n  font-weight: 500;\n}\n\n.order-footer {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-top: 12px;\n}\n\n.total-price {\n  font-size: 16px;\n  font-weight: bold;\n  color: #F56C6C;\n}\n\n.order-actions {\n  display: flex;\n  gap: 8px;\n}\n\n.btn-confirm {\n  background-color: #67C23A;\n  color: white;\n}\n\n.btn-complete {\n  background-color: #409EFF;\n  color: white;\n}\n\n.btn-delete {\n  background-color: #F56C6C;\n  color: white;\n}\n\n/* 响应式调整 */\n@media screen and (max-width: 768px) {\n  .order-management {\n    padding: 12px;\n  }\n  \n  .pagination-container {\n    margin-top: 20px;\n    display: flex;\n    justify-content: center;\n  }\n}\n\n/* PC端样式保持不变 */\ntable {\n  width: 100%;\n  border-collapse: collapse;\n  margin-top: 20px;\n  background-color: white;\n  border-radius: 8px;\n  overflow: hidden;\n  box-shadow: 0 2px 12px 0 rgba(0,0,0,0.1);\n}\n\nth, td {\n  padding: 12px 15px;\n  text-align: left;\n  border-bottom: 1px solid #EBEEF5;\n}\n\nth {\n  background-color: #F5F7FA;\n  color: #606266;\n  font-weight: 500;\n}\n\ntr:hover {\n  background-color: #F5F7FA;\n}\n\n.empty-message {\n  text-align: center;\n  color: #909399;\n  margin-top: 40px;\n}\n\n.user-info {\n  display: flex;\n  flex-direction: column;\n}\n\n.email {\n  font-size: 14px;\n  color: #909399;\n}\n\n.order-items {\n  max-width: 300px;\n  padding: 8px;\n}\n\n.order-item {\n  background-color: #f8f9fa;\n  border-radius: 4px;\n  padding: 8px;\n  margin-bottom: 8px;\n}\n\n.order-item:last-child {\n  margin-bottom: 0;\n}\n\n.item-info {\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n}\n\n.item-name {\n  font-weight: bold;\n  color: #303133;\n}\n\n.item-details {\n  display: flex;\n  flex-direction: column;\n  gap: 2px;\n  font-size: 13px;\n  color: #606266;\n}\n\n.item-quantity, .item-price, .item-total {\n  margin-right: 12px;\n}\n\n.item-total {\n  color: #409EFF;\n  font-weight: 500;\n}\n\n.price {\n  font-weight: bold;\n}\n\n.status-tag {\n  padding: 2px 6px;\n  border-radius: 4px;\n  font-size: 12px;\n}\n\n.status-0 {\n  background-color: #F56C6C;\n  color: white;\n}\n\n.status-1 {\n  background-color: #67C23A;\n  color: white;\n}\n\n.status-2 {\n  background-color: #409EFF;\n  color: white;\n}\n\n.status-3 {\n  background-color: #909399;\n  color: white;\n}\n\n.time-info {\n  display: flex;\n  flex-direction: column;\n}\n\n.time {\n  font-size: 14px;\n  color: #909399;\n}\n\n.loading {\n  text-align: center;\n  margin-top: 40px;\n}\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}