{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { Popup, Button, List, Cell, CellGroup } from \"vant\";\nimport { ElCard, ElButton, ElRow, ElCol, ElTabs, ElTabPane, ElTable, ElTableColumn } from \"element-plus\";\nexport default {\n  components: {\n    [Popup.name]: Popup,\n    [Button.name]: Button,\n    [List.name]: List,\n    [Cell.name]: Cell,\n    [CellGroup.name]: CellGroup,\n    ElCard,\n    ElButton,\n    ElRow,\n    ElCol,\n    ElTabs,\n    ElTabPane,\n    ElTable,\n    ElTableColumn\n  },\n  data() {\n    return {\n      showAdminPanel: false,\n      activeTab: \"admins\",\n      users: [],\n      admins: [],\n      orders: []\n    };\n  },\n  computed: {\n    isLoggedIn() {\n      return !!localStorage.getItem(\"authToken\");\n    },\n    isAdmin() {\n      return localStorage.getItem(\"userRole\") === \"admin\";\n    },\n    isSuperAdmin() {\n      return localStorage.getItem(\"userRole\") === \"super_admin\";\n    }\n  },\n  methods: {\n    fetchUserOrders() {\n      // Implementation remains unchanged\n    },\n    viewOrderDetails(orderId) {\n      this.$router.push({\n        name: \"OrderDetail\",\n        params: {\n          orderId\n        }\n      });\n    },\n    promoteUser(userId) {\n      // Implementation remains unchanged\n    },\n    demoteUser(adminId) {\n      // Implementation remains unchanged\n    }\n  }\n};","map":{"version":3,"names":["Popup","Button","List","Cell","CellGroup","ElCard","ElButton","ElRow","ElCol","ElTabs","ElTabPane","ElTable","ElTableColumn","components","name","data","showAdminPanel","activeTab","users","admins","orders","computed","isLoggedIn","localStorage","getItem","isAdmin","isSuperAdmin","methods","fetchUserOrders","viewOrderDetails","orderId","$router","push","params","promoteUser","userId","demoteUser","adminId"],"sources":["C:\\Users\\拯救者\\Desktop\\text\\community-service\\src\\components\\DiscoverPage.vue"],"sourcesContent":["<template>\n  <div class=\"discover\">\n    <el-card class=\"box-card\">\n      <template #header>\n        <h2>发现</h2>\n      </template>\n\n      <!-- 检查用户是否已登录 -->\n      <div v-if=\"isLoggedIn\">\n        <!-- 普通用户的功能 -->\n        <div v-if=\"!isAdmin && !isSuperAdmin\">\n          <el-row gutter=\"20\">\n            <el-col :span=\"12\">\n              <router-link to=\"/CanteenOrder\">\n                <van-button type=\"primary\" block>社区食堂</van-button>\n              </router-link>\n            </el-col>\n            <el-col :span=\"12\">\n              <van-button type=\"info\" block @click=\"fetchUserOrders\">查看我的订单</van-button>\n            </el-col>\n          </el-row>\n\n          <!-- 用户订单 -->\n          <van-list v-if=\"orders.length > 0\" class=\"order-list\" finished>\n            <van-cell-group>\n              <van-cell\n                v-for=\"order in orders\"\n                :key=\"order.id\"\n                :title=\"`订单 ID: ${order.id}`\"\n                :label=\"`总价格: ${order.total_price} 元`\"\n              >\n                <template #right-icon>\n                  <van-button type=\"primary\" size=\"small\" @click=\"viewOrderDetails(order.id)\">查看详情</van-button>\n                </template>\n              </van-cell>\n            </van-cell-group>\n          </van-list>\n        </div>\n\n        <!-- 管理员和超级管理员功能 -->\n        <div v-if=\"isSuperAdmin || isAdmin\">\n          <el-row gutter=\"20\" class=\"admin-functions\">\n            <el-col :span=\"8\">\n              <router-link to=\"/articles/new\">\n                <el-button type=\"primary\" block>文章编写</el-button>\n              </router-link>\n            </el-col>\n            <el-col :span=\"8\">\n              <el-button type=\"success\" block @click=\"showAdminPanel = true\">管理模块</el-button>\n            </el-col>\n            <el-col :span=\"8\">\n              <router-link to=\"/canteen/orders\">\n                <el-button type=\"warning\" block>订单管理</el-button>\n              </router-link>\n            </el-col>\n          </el-row>\n\n          <!-- 管理模块弹出层 -->\n          <van-popup v-model=\"showAdminPanel\" position=\"bottom\" :style=\"{ height: '80%' }\">\n            <el-card>\n              <template #header>\n                <h3>管理员和用户列表</h3>\n                <el-button size=\"small\" @click=\"showAdminPanel = false\">关闭</el-button>\n              </template>\n              <el-tabs v-model=\"activeTab\">\n                <el-tab-pane label=\"管理员列表\" name=\"admins\">\n                  <el-table :data=\"admins\" border>\n                    <el-table-column prop=\"username\" label=\"用户名\"></el-table-column>\n                    <el-table-column label=\"操作\">\n                      <template #default=\"scope\">\n                        <el-button\n                          v-if=\"isSuperAdmin\"\n                          size=\"mini\"\n                          type=\"danger\"\n                          @click=\"demoteUser(scope.row.id)\"\n                        >\n                          降为用户\n                        </el-button>\n                      </template>\n                    </el-table-column>\n                  </el-table>\n                </el-tab-pane>\n                <el-tab-pane label=\"用户列表\" name=\"users\">\n                  <el-table :data=\"users\" border>\n                    <el-table-column prop=\"username\" label=\"用户名\"></el-table-column>\n                    <el-table-column label=\"操作\">\n                      <template #default=\"scope\">\n                        <el-button\n                          v-if=\"isSuperAdmin\"\n                          size=\"mini\"\n                          type=\"success\"\n                          @click=\"promoteUser(scope.row.id)\"\n                        >\n                          升为管理员\n                        </el-button>\n                      </template>\n                    </el-table-column>\n                  </el-table>\n                </el-tab-pane>\n              </el-tabs>\n            </el-card>\n          </van-popup>\n        </div>\n      </div>\n\n      <!-- 未登录用户 -->\n      <div v-else>\n        <p>请登录以查看内容。</p>\n        <router-link to=\"/login\">\n          <van-button type=\"primary\" block>登录</van-button>\n        </router-link>\n      </div>\n    </el-card>\n  </div>\n</template>\n\n<script>\nimport { Popup, Button, List, Cell, CellGroup } from \"vant\";\nimport { ElCard, ElButton, ElRow, ElCol, ElTabs, ElTabPane, ElTable, ElTableColumn } from \"element-plus\";\n\nexport default {\n  components: {\n    [Popup.name]: Popup,\n    [Button.name]: Button,\n    [List.name]: List,\n    [Cell.name]: Cell,\n    [CellGroup.name]: CellGroup,\n    ElCard,\n    ElButton,\n    ElRow,\n    ElCol,\n    ElTabs,\n    ElTabPane,\n    ElTable,\n    ElTableColumn,\n  },\n  data() {\n    return {\n      showAdminPanel: false,\n      activeTab: \"admins\",\n      users: [],\n      admins: [],\n      orders: [],\n    };\n  },\n  computed: {\n    isLoggedIn() {\n      return !!localStorage.getItem(\"authToken\");\n    },\n    isAdmin() {\n      return localStorage.getItem(\"userRole\") === \"admin\";\n    },\n    isSuperAdmin() {\n      return localStorage.getItem(\"userRole\") === \"super_admin\";\n    },\n  },\n  methods: {\n    fetchUserOrders() {\n      // Implementation remains unchanged\n    },\n    viewOrderDetails(orderId) {\n      this.$router.push({ name: \"OrderDetail\", params: { orderId } });\n    },\n    promoteUser(userId) {\n      // Implementation remains unchanged\n    },\n    demoteUser(adminId) {\n      // Implementation remains unchanged\n    },\n  },\n};\n</script>\n\n<style scoped>\n.discover {\n  padding: 20px;\n}\n.box-card {\n  margin: 20px;\n}\n.order-list {\n  margin-top: 15px;\n}\n.admin-functions {\n  margin-top: 20px;\n}\n</style>\n"],"mappings":";AAqHA,SAASA,KAAK,EAAEC,MAAM,EAAEC,IAAI,EAAEC,IAAI,EAAEC,SAAQ,QAAS,MAAM;AAC3D,SAASC,MAAM,EAAEC,QAAQ,EAAEC,KAAK,EAAEC,KAAK,EAAEC,MAAM,EAAEC,SAAS,EAAEC,OAAO,EAAEC,aAAY,QAAS,cAAc;AAExG,eAAe;EACbC,UAAU,EAAE;IACV,CAACb,KAAK,CAACc,IAAI,GAAGd,KAAK;IACnB,CAACC,MAAM,CAACa,IAAI,GAAGb,MAAM;IACrB,CAACC,IAAI,CAACY,IAAI,GAAGZ,IAAI;IACjB,CAACC,IAAI,CAACW,IAAI,GAAGX,IAAI;IACjB,CAACC,SAAS,CAACU,IAAI,GAAGV,SAAS;IAC3BC,MAAM;IACNC,QAAQ;IACRC,KAAK;IACLC,KAAK;IACLC,MAAM;IACNC,SAAS;IACTC,OAAO;IACPC;EACF,CAAC;EACDG,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,cAAc,EAAE,KAAK;MACrBC,SAAS,EAAE,QAAQ;MACnBC,KAAK,EAAE,EAAE;MACTC,MAAM,EAAE,EAAE;MACVC,MAAM,EAAE;IACV,CAAC;EACH,CAAC;EACDC,QAAQ,EAAE;IACRC,UAAUA,CAAA,EAAG;MACX,OAAO,CAAC,CAACC,YAAY,CAACC,OAAO,CAAC,WAAW,CAAC;IAC5C,CAAC;IACDC,OAAOA,CAAA,EAAG;MACR,OAAOF,YAAY,CAACC,OAAO,CAAC,UAAU,MAAM,OAAO;IACrD,CAAC;IACDE,YAAYA,CAAA,EAAG;MACb,OAAOH,YAAY,CAACC,OAAO,CAAC,UAAU,MAAM,aAAa;IAC3D;EACF,CAAC;EACDG,OAAO,EAAE;IACPC,eAAeA,CAAA,EAAG;MAChB;IAAA,CACD;IACDC,gBAAgBA,CAACC,OAAO,EAAE;MACxB,IAAI,CAACC,OAAO,CAACC,IAAI,CAAC;QAAElB,IAAI,EAAE,aAAa;QAAEmB,MAAM,EAAE;UAAEH;QAAQ;MAAE,CAAC,CAAC;IACjE,CAAC;IACDI,WAAWA,CAACC,MAAM,EAAE;MAClB;IAAA,CACD;IACDC,UAAUA,CAACC,OAAO,EAAE;MAClB;IAAA;EAEJ;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}