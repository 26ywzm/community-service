{"ast":null,"code":"import { resolveComponent as _resolveComponent, createVNode as _createVNode, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, withCtx as _withCtx, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode } from \"vue\";\nconst _hoisted_1 = {\n  class: \"order-detail\"\n};\nconst _hoisted_2 = {\n  class: \"card-header\"\n};\nconst _hoisted_3 = {\n  key: 0,\n  class: \"order-content\"\n};\nconst _hoisted_4 = {\n  class: \"price\"\n};\nconst _hoisted_5 = {\n  key: 0,\n  class: \"order-items\"\n};\nconst _hoisted_6 = {\n  class: \"item-content\"\n};\nconst _hoisted_7 = {\n  class: \"item-main\"\n};\nconst _hoisted_8 = {\n  class: \"item-name\"\n};\nconst _hoisted_9 = {\n  class: \"item-price\"\n};\nconst _hoisted_10 = {\n  class: \"item-sub\"\n};\nconst _hoisted_11 = {\n  class: \"subtotal\"\n};\nconst _hoisted_12 = {\n  key: 1,\n  class: \"loading-wrapper\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_el_page_header = _resolveComponent(\"el-page-header\");\n  const _component_el_descriptions_item = _resolveComponent(\"el-descriptions-item\");\n  const _component_el_tag = _resolveComponent(\"el-tag\");\n  const _component_el_descriptions = _resolveComponent(\"el-descriptions\");\n  const _component_el_card = _resolveComponent(\"el-card\");\n  const _component_el_empty = _resolveComponent(\"el-empty\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createVNode(_component_el_card, {\n    class: \"box-card\"\n  }, {\n    header: _withCtx(() => [_createElementVNode(\"div\", _hoisted_2, [_createVNode(_component_el_page_header, {\n      onBack: $options.goBack,\n      title: \"返回\",\n      content: \"订单详情\"\n    }, null, 8 /* PROPS */, [\"onBack\"])])]),\n    default: _withCtx(() => [$data.order ? (_openBlock(), _createElementBlock(\"div\", _hoisted_3, [_createVNode(_component_el_descriptions, {\n      title: \"订单信息\",\n      column: 1,\n      border: \"\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_descriptions_item, {\n        label: \"订单编号\"\n      }, {\n        default: _withCtx(() => [_createTextVNode(_toDisplayString($data.order.id), 1 /* TEXT */)]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_el_descriptions_item, {\n        label: \"用户名\"\n      }, {\n        default: _withCtx(() => [_createTextVNode(_toDisplayString($data.order.username), 1 /* TEXT */)]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_el_descriptions_item, {\n        label: \"邮箱\"\n      }, {\n        default: _withCtx(() => [_createTextVNode(_toDisplayString($data.order.email), 1 /* TEXT */)]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_el_descriptions_item, {\n        label: \"订单状态\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_tag, {\n          type: $options.getStatusType($data.order.status)\n        }, {\n          default: _withCtx(() => [_createTextVNode(_toDisplayString($data.statusText[$data.order.status] || '未知状态'), 1 /* TEXT */)]),\n          _: 1 /* STABLE */\n        }, 8 /* PROPS */, [\"type\"])]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_el_descriptions_item, {\n        label: \"总价格\"\n      }, {\n        default: _withCtx(() => [_createElementVNode(\"span\", _hoisted_4, \"¥\" + _toDisplayString($data.order.total_price), 1 /* TEXT */)]),\n        _: 1 /* STABLE */\n      })]),\n      _: 1 /* STABLE */\n    }), $data.order.items && $data.order.items.length ? (_openBlock(), _createElementBlock(\"div\", _hoisted_5, [_cache[0] || (_cache[0] = _createElementVNode(\"h3\", null, \"订单商品\", -1 /* HOISTED */)), (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.order.items, item => {\n      return _openBlock(), _createBlock(_component_el_card, {\n        key: item.menu_item_id,\n        class: \"item-card\",\n        shadow: \"hover\"\n      }, {\n        default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_6, [_createElementVNode(\"div\", _hoisted_7, [_createElementVNode(\"span\", _hoisted_8, _toDisplayString(item.name), 1 /* TEXT */), _createElementVNode(\"span\", _hoisted_9, \"¥\" + _toDisplayString(item.price), 1 /* TEXT */)]), _createElementVNode(\"div\", _hoisted_10, [_createElementVNode(\"span\", null, \"数量：\" + _toDisplayString(item.quantity), 1 /* TEXT */), _createElementVNode(\"span\", _hoisted_11, \"小计：¥\" + _toDisplayString((item.quantity * item.price).toFixed(2)), 1 /* TEXT */)])])]),\n        _: 2 /* DYNAMIC */\n      }, 1024 /* DYNAMIC_SLOTS */);\n    }), 128 /* KEYED_FRAGMENT */))])) : _createCommentVNode(\"v-if\", true)])) : $data.loading ? (_openBlock(), _createElementBlock(\"div\", _hoisted_12, [_createVNode(_component_el_empty, {\n      description: \"正在加载订单信息...\"\n    })])) : _createCommentVNode(\"v-if\", true)]),\n    _: 1 /* STABLE */\n  })]);\n}","map":{"version":3,"names":["class","key","_createElementBlock","_hoisted_1","_createVNode","_component_el_card","header","_withCtx","_createElementVNode","_hoisted_2","_component_el_page_header","onBack","$options","goBack","title","content","default","$data","order","_hoisted_3","_component_el_descriptions","column","border","_component_el_descriptions_item","label","_createTextVNode","_toDisplayString","id","_","username","email","_component_el_tag","type","getStatusType","status","statusText","_hoisted_4","total_price","items","length","_hoisted_5","_Fragment","_renderList","item","_createBlock","menu_item_id","shadow","_hoisted_6","_hoisted_7","_hoisted_8","name","_hoisted_9","price","_hoisted_10","quantity","_hoisted_11","toFixed","_createCommentVNode","loading","_hoisted_12","_component_el_empty","description"],"sources":["C:\\Users\\拯救者\\Desktop\\text\\community-service\\src\\components\\OrderDetail.vue"],"sourcesContent":["<template>\n    <div class=\"order-detail\">\n        <el-card class=\"box-card\">\n            <template #header>\n                <div class=\"card-header\">\n                    <el-page-header @back=\"goBack\" title=\"返回\" content=\"订单详情\" />\n                </div>\n            </template>\n\n            <div v-if=\"order\" class=\"order-content\">\n                <el-descriptions title=\"订单信息\" :column=\"1\" border>\n                    <el-descriptions-item label=\"订单编号\">\n                        {{ order.id }}\n                    </el-descriptions-item>\n                    <el-descriptions-item label=\"用户名\">\n                        {{ order.username }}\n                    </el-descriptions-item>\n                    <el-descriptions-item label=\"邮箱\">\n                        {{ order.email }}\n                    </el-descriptions-item>\n                    <el-descriptions-item label=\"订单状态\">\n                        <el-tag :type=\"getStatusType(order.status)\">\n                            {{ statusText[order.status] || '未知状态' }}\n                        </el-tag>\n                    </el-descriptions-item>\n                    <el-descriptions-item label=\"总价格\">\n                        <span class=\"price\">¥{{ order.total_price }}</span>\n                    </el-descriptions-item>\n                </el-descriptions>\n\n                <div v-if=\"order.items && order.items.length\" class=\"order-items\">\n                    <h3>订单商品</h3>\n                    <el-card v-for=\"item in order.items\" \n                            :key=\"item.menu_item_id\" \n                            class=\"item-card\"\n                            shadow=\"hover\">\n                        <div class=\"item-content\">\n                            <div class=\"item-main\">\n                                <span class=\"item-name\">{{ item.name }}</span>\n                                <span class=\"item-price\">¥{{ item.price }}</span>\n                            </div>\n                            <div class=\"item-sub\">\n                                <span>数量：{{ item.quantity }}</span>\n                                <span class=\"subtotal\">小计：¥{{ (item.quantity * item.price).toFixed(2) }}</span>\n                            </div>\n                        </div>\n                    </el-card>\n                </div>\n            </div>\n\n            <div v-else-if=\"loading\" class=\"loading-wrapper\">\n                <el-empty description=\"正在加载订单信息...\" />\n            </div>\n        </el-card>\n    </div>\n</template>\n\n<script>\nimport axios from 'axios';\nimport { handleApiError } from '../utils/errorHandler';\nconst API = process.env.VUE_APP_API_URL;\n\nexport default {\n    name: 'OrderDetail',\n    data() {\n        return {\n            order: null,\n            loading: true,\n            statusText: {\n                0: '待处理',\n                1: '处理中',\n                2: '已完成',\n                3: '已取消'\n            }\n        };\n    },\n    async created() {\n        await this.fetchOrderDetails();\n    },\n    methods: {\n        getStatusType(status) {\n            const typeMap = {\n                0: 'info',    // 待处理\n                1: 'warning', // 处理中\n                2: 'success', // 已完成\n                3: 'danger'   // 已取消\n            };\n            return typeMap[status] || 'info';\n        },\n        async fetchOrderDetails() {\n            const orderId = this.$route.params.orderId;\n            try {\n                const response = await axios.get(`${API}/canteen/order/${orderId}`, {\n                    headers: {\n                        Authorization: `Bearer ${localStorage.getItem('authToken')}`\n                    }\n                });\n                const orderData = response.data;\n                \n                if (orderData && orderData.user) {\n                    this.order = {\n                        ...orderData,\n                        email: orderData.user.email,\n                        username: orderData.user.username\n                    };\n                } else {\n                    this.order = orderData;\n                }\n                this.loading = false;\n            } catch (error) {\n                console.error('获取订单详情失败:', error);\n                handleApiError(error);\n            }\n        },\n        formatDate(dateString) {\n            if (!dateString) return '暂无日期';\n            try {\n                const date = new Date(dateString);\n                if (isNaN(date.getTime())) return '无效日期';\n                \n                const options = { \n                    year: 'numeric', \n                    month: '2-digit', \n                    day: '2-digit', \n                    hour: '2-digit', \n                    minute: '2-digit',\n                    hour12: false \n                };\n                return date.toLocaleString('zh-CN', options).replace(/\\//g, '-');\n            } catch (error) {\n                console.error('日期格式化错误:', error);\n                return '日期格式错误';\n            }\n        },\n        goBack() {\n            this.$router.push('/discover');\n        }\n    }\n};\n</script>\n\n<style scoped>\n.order-detail {\n    max-width: 800px;\n    margin: 20px auto;\n    padding: 0 20px;\n}\n\n.card-header {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n}\n\n.order-content {\n    padding: 20px 0;\n}\n\n.price {\n    color: #f56c6c;\n    font-size: 16px;\n    font-weight: 500;\n}\n\n.order-items {\n    margin-top: 30px;\n}\n\n.order-items h3 {\n    margin-bottom: 20px;\n    font-size: 18px;\n    font-weight: 500;\n    color: #303133;\n}\n\n.item-card {\n    margin-bottom: 16px;\n    transition: all 0.3s ease;\n}\n\n.item-content {\n    display: flex;\n    flex-direction: column;\n    gap: 12px;\n}\n\n.item-main {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n}\n\n.item-name {\n    font-size: 16px;\n    font-weight: 500;\n    color: #303133;\n}\n\n.item-price {\n    color: #f56c6c;\n    font-weight: 500;\n}\n\n.item-sub {\n    display: flex;\n    justify-content: space-between;\n    color: #606266;\n    font-size: 14px;\n}\n\n.subtotal {\n    color: #409EFF;\n    font-weight: 500;\n}\n\n.loading-wrapper {\n    padding: 40px;\n    text-align: center;\n}\n\n:deep(.el-descriptions) {\n    margin-bottom: 20px;\n}\n\n:deep(.el-descriptions__title) {\n    font-size: 18px;\n    font-weight: 500;\n    margin-bottom: 16px;\n}\n\n:deep(.el-descriptions__label) {\n    font-weight: 500;\n}\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}