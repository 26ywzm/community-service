{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from 'axios';\nconst API = process.env.VUE_APP_API_URL;\nexport default {\n  name: 'UserLogin',\n  data() {\n    return {\n      email: '',\n      password: '',\n      loading: false,\n      showPassword: false\n    };\n  },\n  methods: {\n    async login() {\n      this.loading = true;\n      try {\n        const response = await axios.post(`${API}/login`, {\n          email: this.email,\n          password: this.password\n        });\n        const {\n          token,\n          user\n        } = response.data;\n\n        // 存储认证信息\n        localStorage.setItem('authToken', token);\n        localStorage.setItem('userRole', user.role);\n        localStorage.setItem('username', user.username);\n        localStorage.setItem('userId', user.id);\n        localStorage.setItem('email', user.email);\n\n        // 根据角色重定向\n        switch (user.role) {\n          case 'super_admin':\n            await this.$router.push('/profile');\n            break;\n          case 'admin':\n            await this.$router.push('/profile');\n            break;\n          default:\n            await this.$router.push('/profile');\n        }\n      } catch (error) {\n        let errorMessage = '登录失败，请重试';\n        if (error.response?.data?.message) {\n          errorMessage = error.response.data.message;\n        }\n        alert(errorMessage);\n      } finally {\n        this.loading = false;\n      }\n    }\n  }\n};","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}